
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}
// Main presentation model (top level content)
model Presentation {
  id           String   @id
  tcode        String
  chapter      Int
  exercise     String
  filename     String
  questionNo   Int
  part         Int
  name         String   @default("")
  questionType String
  status       String
  sortOrder    Int      @default(0)
  comments     String   @default("")
  tags         String   @default("[]") // Stored as JSON string
  
  // Relationships to slides
  eqSlides     EqSlide[]
  canvasSlides CanvasSlide[] // Empty array as per requirements
  
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}
// EqSlide model for equation slides
model EqSlide {
  id          String    @id
  uuid        String    @unique
  startTime   Int
  endTime     Int
  type        String
  version     String
  template    String    @default("")
  sortOrder   Int       @default(0) 
  
  // Relationship to parent presentation
  presentation   Presentation @relation(fields: [presentationId], references: [id], onDelete: Cascade)
  presentationId String
  
  // Relationship to items
  items       EqItem[]
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
// Canvas slide model (empty but required by schema)
model CanvasSlide {
  id          String    @id
  uuid        String    @unique
  type        String    @default("canvas")
  sortOrder   Int       @default(0)
  
  // Relationship to parent presentation  
  presentation   Presentation @relation(fields: [presentationId], references: [id], onDelete: Cascade)
  presentationId String
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
// EqItem model for items within equation slides
model EqItem {
  id          String    @id
  uuid        String    @unique
  name        String    @default("")
  content     String    @default("")
  showAt      Int
  hideAt      Int
  startTime   Int
  endTime     Int
  code        String    @default("")
  type        String
  sortOrder   Int       @default(0)
  
  // Relationship to parent slide
  slide       EqSlide   @relation(fields: [slideId], references: [id], onDelete: Cascade)
  slideId     String
  
  // Relationship to solution points
  sps         Sp[]
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
// Solution Points (sp) model
model Sp {
  id          String    @id @default(cuid())
  code        String
  type        String
  sortOrder   Int       @default(0)
  
  // Relationship to parent item
  item        EqItem    @relation(fields: [itemId], references: [id], onDelete: Cascade)
  itemId      String
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}